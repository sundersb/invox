# Выгрузка счетов из Релакс в XML

Консольная утилита для выгрузки счетов за оказанную медицинскую помощь из АРМ ЛПУ Релакс (Хабаровский край) в XML  для последующей отправки в ХКФОМС (БАРС.Процессинг). Актуальные для загрузки в БАРС приказы на настоящее время: №169 от 9.09.2016 (ФФОМС), №192 от 11.11.2017 (ХКФОМС), №59 от 30.03.2018 (ФФОМС).

## Что делает эта программа
- Выгружает сведения об оказанных пациентам своей территории услугах в ЛПУ амбулаторно-поликлинического профиля. Формат выгрузки соответствует регламенту, установленному приказами федерального ФОМС с поправками на самодеятельность краевого фонда.

## Чего не делает эта программа
- Не проверяет полученные из Релакс данные на корректность/целостность/достоверность/полноту и пр.
- Не выгружает иногородних
- Не работает с круглосуточными стационарами, стоматологией, педиатрией
- Не разбивает основные счета по договорам. Получатель выгрузки в настоящее время только ХКФОМС
- Не высылает полученные файлы в БАРС
- Не работает с протоколом ошибок ТК/ФЛК

## Требования для установки
- .NET Framework 3.5
- VFP OLE DB Provider

## Требования для компиляции
- MS VC# 2010

## Статус
Альфа. См. Roadmap

## Roadmap
- Test unit
- XML-трансформация получившихся файлов для формального контроля ошибок
- Заменить кошмарный Model.Reason на кошерный
- Результат диспансеризации (БАРС в настоящее время интерпретирует его неверно)
- Иногородние - извлечение из Релакс ОКАТО, СМО пациента и т.д.
- Тарифы и стоимость (т.к. подушеве финансирование)
- Признаки "особый случай" (OS_SLUCH) ХКФОМС противоречат ФФОМС
- SLUCH.TAL_D, SLUCH.TAL_P - где брать?
- Признак поступления/перевода SLUCH.P_PER
- Вид и метод ВМП
- Оптимизация поиска кодов для V006, V008, V014, V002, V015, V010, цель обращения
- Выгрузка стационара, стоматологии, СМП и т.д.

## Справочники
Худо-бедно подставляются коды классификаторов для
- СМО (SLMSO) - Федеральный справочник F002. Только своя территория
- Профиль медицинской помощи (SLMSP) - справочник V002
- Условия оказания медицинской помощи (SLUSL) - V006
- Вид МП (пол-палец-потолок - из КМУ) - V008
- Результат обращения (REZOBR) - V009
- Способ оплаты (OPLMSP) - V010
- Исход госпиталиации (BOLEND) - V012
- Форма оказания МП (пол-палец-потолок) V014
- Медицинские специальности (SLSPEC) - V021
- Типы документов, удостоверяющих личность (TPDOC) - F011
- Цель обращения (OPLMSP, пол-палец-потолок) - ХКФОМС
- Добавлена расшифровка онкологической благомути из обновления к Релакс от 1 августа 2018

Продолжается работа по адаптации других справочников

## Нескладушки
- Нет платформы для тестирования выгрузки. Тестирование проводится на рабочей системе ХКФОМС, которую можно более-менее нормально использовать в короткие промежутки между отчетными периодами.
- Неясно, что у Хабаровского ФОМС на уме. По какому приказу они принимают выгрузку? Ждут август по приказу 59, но соответствующие изменения отмечают ошибками.
- Вложенность, порядок и смысл полей в приказах ФФОМС нередко противоречит здравому смыслу.
- Нет интегрированного описания формата обмена, в котором были бы собраны сведения из всех приказов.