# Выгрузка счетов из Релакс в XML

Консольная утилита для выгрузки счетов за оказанную медицинскую помощь из АРМ ЛПУ Релакс (Хабаровский край) в XML  для последующей отправки в ХКФОМС (БАРС.Процессинг). Актуальные для загрузки в БАРС приказы на настоящее время: №285 от 13.12.2018 (ФФОМС), №272 от 24.12.2018 (ХКФОМС).

## Проекты
- invox - консольное приложение для выгрузки периода из Релакс в XML.
- civox - не поддерживается в силу устаревания формата обмена данными с ХКФОМС

## Что делает эта программа
- Выгружает сведения об оказанных пациентам своей территории услугах в ЛПУ амбулаторно-поликлинического профиля. Формат выгрузки соответствует регламенту, установленному приказами федерального ФОМС с поправками на самодеятельность краевого фонда.

## Чего не делает эта программа
- Не проверяет полученные из Релакс данные на корректность/целостность/достоверность/полноту и пр.
- Не выгружает иногородних
- Не работает со стоматологией, педиатрией
- Круглосуточный стационар не тестировался
- Не разбивает основные счета по договорам. Получатель выгрузки в настоящее время только ХКФОМС
- Не высылает полученные файлы в БАРС
- Не работает с протоколом ошибок ТК/ФЛК

## Требования для установки
- .NET Framework 3.5
- VFP OLE DB Provider

## Установка и настройка
Перед запуском необоходимо внести изменения в настройки программы через свойства проекта либо путем редактирования invox.exe.conf. Убедитесь в том, что Вы указали правильный код Вашго ЛПУ (LpuCode - код по классификатору F003 и LocalLpuCode - релаксовский код ЛПУ).
Параметр PathTo7Zip должен содержать полный путь до исполняемого файла архиватора 7-Zip.
Параметр Pediatric должен быть False для взрослого ЛПУ и True для детского.

## Требования для компиляции
- MS VC# 2010

## Статус
Бета. См. Roadmap

## Roadmap
- Test unit
- XML-трансформация получившихся файлов для формального контроля ошибок
- Иногородние - извлечение из Релакс ОКАТО, СМО пациента и т.д.
- Вид и метод ВМП
- Выгрузка стоматологии, СМП и т.д.
- Тарифы и стоимость (т.к. подушеве финансирование)

## Справочники
Для поиска и подстановки значений федеральных справочников используются адаптации Релакс, где возможно; словари, транслирующие коды Релакс в федеральные; а также вычисление кодов на основании полученных из файлов счетов и справочников Релакс данных. Механизмы выбора цели обращения и способа оплаты подчиняются "методике расчета" от ХКФОМС.

## Нескладушки
- Вложенность, порядок и смысл полей в приказах ФФОМС нередко противоречит здравому смыслу.
